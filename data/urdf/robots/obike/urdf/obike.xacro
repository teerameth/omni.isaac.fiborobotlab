<?xml version="1.0"?>
<robot name="obike" xmlns:xacro="http://ros.org/wiki/xacro">
	<xacro:property name="MODEL_PATH" value="/home/teera/urdf/robots/obike/meshes/"/>
    <xacro:macro name="inertial_box" params="size rho:=1000 xyz:='0 0 0' rpy:='0 0 0'">
		<xacro:property name="w" value="${size.split()[0]}"/>
		<xacro:property name="d" value="${size.split()[1]}"/>
		<xacro:property name="h" value="${size.split()[2]}"/>
		<xacro:property name="mass" value="${rho*w*d*h}"/>
		<inertial>
			<origin xyz="${xyz}" rpy="${rpy}"/>
			<mass value="${mass}"/>
			<inertia ixx="${(mass/12)*(h**2 + d**2)}" iyy="${(mass/12)*(w**2 + h**2)}" izz="${(mass/12)*(w**2 + d**2)}" ixy="0" ixz="0" iyz="0"/>
		</inertial>
	</xacro:macro>
	<xacro:macro name="inertial_cylinder" params="length radius rho:=1000 xyz:='0 0 0' rpy:='0 0 0'">
		<xacro:property name="mass" value="${rho*pi*length*radius**2}"/>
		<inertial>
			<origin xyz="${xyz}" rpy="${rpy}"/>
			<mass value="${mass}"/>
			<inertia ixx="${(mass/12)*(3*radius**2 + length**2)}" iyy="${(mass/12)*(3*radius**2 + length**2)}" izz="${(mass/2)*radius**2}" ixy="0" ixz="0" iyz="0"/>
		</inertial>
	</xacro:macro>
	<xacro:macro name="inertial_sphere" params="radius rho:=1000 xyz:='0 0 0' rpy:='0 0 0'">
		<xacro:property name="mass" value="${4/3*rho*pi*radius**3}"/>
		<inertial>
			<origin xyz="${xyz}" rpy="${rpy}"/>
			<mass value="${mass}"/>
			<inertia ixx="${(2/5*mass)*(radius**2)}" iyy="${(2/5*mass)*(radius**2)}" izz="${(2/5*mass)*(radius**2)}" ixy="0" ixz="0" iyz="0"/>
		</inertial>
	</xacro:macro>
	<xacro:macro name="collision_cylinder" params="length radius xyz:='0 0 0' rpy:='0 0 0'">
		<collision>
			<origin xyz="${xyz}" rpy="${rpy}"/>
			<geometry>
				<cylinder length="${length}" radius="${radius}"/>
			</geometry>
		</collision>
	</xacro:macro>
	<xacro:macro name="collision_capsule" params="length radius xyz:='0 0 0' rpy:='0 0 0'">
		<collision>
			<origin xyz="${xyz}" rpy="${rpy}"/>
			<geometry>
				<capsule length="${length}" radius="${radius}"/>
			</geometry>
		</collision>
	</xacro:macro>
	<xacro:macro name="collision_box" params="size xyz:='0 0 0' rpy:='0 0 0'">
		<collision>
			<origin xyz="${xyz}" rpy="${rpy}"/>
			<geometry>
				<box size="${size}"/>
			</geometry>
		</collision>
	</xacro:macro>
	<xacro:macro name="collision_sphere" params="radius xyz:='0 0 0' rpy:='0 0 0'">
		<collision>
			<origin xyz="${xyz}" rpy="${rpy}"/>
			<geometry>
				<sphere radius="${radius}"/>
			</geometry>
		</collision>
	</xacro:macro>
	<xacro:macro name="inertial_manual" params="mass xyz:='0 0 0' rpy:='0 0 0' ixx iyy izz iyz ixz ixy">
		<inertial>
			<origin xyz="${xyz}" rpy="${rpy}"/>
			<mass value="${mass}"/>
			<inertia ixx="${ixx}" iyy="${iyy}" izz="${izz}" iyz="${iyz}" ixz="${ixz}" ixy="${ixy}"/>
		</inertial>
	</xacro:macro>

	<link name="chassic">
		<visual>
			<geometry>
				<mesh filename="${MODEL_PATH}chassic.dae" scale="1 1 1"/>
			</geometry>
		</visual>
		<xacro:inertial_manual mass="0.288" xyz="0.0047367 -0.00165617 0.0191097" ixx="3.80011e-05" iyy="8.50835e-05" izz="9.50647e-05" iyz="-1.16837e-11" ixz="-6.35148e-06" ixy="-3.93988e-11"/>
		<collision>
			<geometry>
				<mesh filename="${MODEL_PATH}chassic.dae" scale="1 1 1"/>
			</geometry>
		</collision>
	</link>

	<link name="motor_mount">
		<visual>
			<geometry>
				<mesh filename="${MODEL_PATH}motor_mount.dae" scale="1 1 1"/>
			</geometry>
		</visual>
		<xacro:inertial_manual mass="0.067" xyz="0.00311605 -2.39414e-08 -0.0261504" ixx="3.80011e-05" iyy="8.50835e-05" izz="9.50647e-05" iyz="-1.16837e-11" ixz="-6.35148e-06" ixy="-3.93988e-11"/>
	</link>

	<joint name="motor_mount_joint" type="fixed">
		<origin xyz="-0.005 0 0.08" rpy="0 0 0"/>
		<parent link="chassic"/>
		<child link="motor_mount"/>
	</joint>

	<link name="front_chassic">
		<visual>
			<geometry>
				<mesh filename="${MODEL_PATH}front_chassic.dae" scale="1 1 1"/>
			</geometry>
		</visual>
		<xacro:inertial_manual mass="0.0298" xyz="0.0277492 1.38661e-08 0.00859761" ixx="7.21055e-06" iyy="8.02622e-06" izz="1.19714e-05" iyz="-4.42397e-13" ixz="-1.61329e-06" ixy="5.32121e-12"/>
		<!-- <collision>
			<geometry>
				<mesh filename="${MODEL_PATH}front_chassic.dae" scale="1 1 1"/>
			</geometry>
		</collision> -->
	</link>

	<joint name="front_chassic_joint" type="fixed">
		<origin xyz="0.055 0 0.035" rpy="0 0 0"/>
		<parent link="chassic"/>
		<child link="front_chassic"/>
	</joint>

	<link name="front_wheel_arm">
		<visual>
			<geometry>
				<mesh filename="${MODEL_PATH}front_wheel_arm.dae" scale="1 1 1"/>
			</geometry>
		</visual>
		<xacro:inertial_manual mass="0.0043" xyz="-6.32629e-08 0.00613173 0.0206668" ixx="8.4523e-07" iyy="7.98604e-07" izz="1.47325e-07" iyz="-9.6622e-08" ixz="3.80111e-12" ixy="-2.0208e-12"/>

	</link>

	<joint name="front_wheel_arm_joint" type="continuous">
		<origin xyz="0.107304 0 0.03901" rpy="0 ${5*pi/6} 0"/>
		<axis xyz="0 0 1"/>
		<parent link="chassic"/>
		<child link="front_wheel_arm"/>
	</joint>

	<link name="front_wheel">
		<visual>
			<geometry>
				<mesh filename="${MODEL_PATH}front_wheel.dae" scale="1 1 1"/>
			</geometry>
		</visual>
		<xacro:inertial_manual mass="0.0116" xyz="-9.22528e-13 -2.05375e-07 -0.000101895" ixx="1.52351e-06" iyy="1.52351e-06" izz="2.95246e-06" iyz="2.01001e-13" ixz="1.55876e-17" ixy="1.10854e-16"/>
		<collision>
			<geometry>
				<mesh filename="${MODEL_PATH}front_wheel.dae" scale="1 1 1"/>
			</geometry>
		</collision>
	</link>

	<joint name="front_wheel_joint" type="continuous">
		<origin xyz="0 0 0.035" rpy="${-pi/2} 0 0"/>
		<axis xyz="0 0 1"/>
		<parent link="front_wheel_arm"/>
		<child link="front_wheel"/>
	</joint>

	<link name="faulhaber">
		<visual>
			<geometry>
				<mesh filename="${MODEL_PATH}faulhaber.dae" scale="1 1 1"/>
			</geometry>
		</visual>
		<xacro:inertial_manual mass="0.213" xyz="4.82201e-09 -1.77912e-19 -0.0074239" ixx="0.000114919" iyy="0.000114919" izz="1.81057e-05" iyz="-9.40735e-22" ixz="1.44574e-11" ixy="3.73504e-22"/>

	</link>

	<joint name="faulhaber_joint" type="fixed">
		<origin xyz="0 0 0" rpy="0 ${pi/2} 0"/>
		<parent link="motor_mount"/>
		<child link="faulhaber"/>
	</joint>


	<link name="reaction_wheel">
		<visual>
			<geometry>
				<mesh filename="${MODEL_PATH}reaction_wheel.dae" scale="1 1 1"/>
			</geometry>
		</visual>
		<!-- <xacro:inertial_manual mass="" xyz="" ixx="" iyy="" izz="" iyz="" ixz="" ixy=""/> -->
	</link>

	<joint name="reaction_wheel_joint" type="continuous">
		<origin xyz="0.044 0 0" rpy="0 ${pi/2} 0"/>
		<axis xyz="0 0 1"/>
		<parent link="motor_mount"/>
		<child link="reaction_wheel"/>
	</joint>

	<link name="reaction_wheel_steel">
		<visual>
			<geometry>
				<mesh filename="${MODEL_PATH}reaction_wheel_steel.dae" scale="1 1 1"/>
			</geometry>
		</visual>
		<xacro:inertial_manual mass="0.198" xyz="2.36685e-08 1.97235e-06 0.00337371" ixx="4.07098e-06" iyy="4.07082e-06" izz="7.53616e-06" iyz="1.64823e-10" ixz="1.77889e-12" ixy="-5.26622e-13"/>
		<xacro:collision_cylinder length="0.012" radius="0.0325"/>
	</link>

	<joint name="reaction_wheel_steel_joint" type="fixed">
		<origin xyz="0 0 0.004" rpy="0 0 0"/>
		<parent link="reaction_wheel"/>
		<child link="reaction_wheel_steel"/>
	</joint>

	<link name="rear_wheel">
		<visual>
			<geometry>
				<mesh filename="${MODEL_PATH}rear_wheel.dae" scale="1 1 1"/>
			</geometry>
		</visual>
		<xacro:inertial_manual mass="0.0273" xyz="8.66222e-10 -2.46799e-07 -5.02853e-06" ixx="7.92469e-06" iyy="7.92468e-06" izz="1.53136e-05" iyz="1.27201e-13" ixz="-1.10104e-16" ixy="-1.1825e-17"/>
		<collision>
			<geometry>
				<mesh filename="${MODEL_PATH}rear_wheel.dae" scale="1 1 1"/>
			</geometry>
		</collision>
	</link>

	<joint name="rear_wheel_joint" type="continuous">
		<origin xyz="-0.05 0 0.022" rpy="${pi/2} 0 0"/>
		<axis xyz="0 0 1"/>
		<parent link="chassic"/>
		<child link="rear_wheel"/>
	</joint>


	
</robot>