<?xml version="1.0"?>
<robot name="obike" xmlns:xacro="http://ros.org/wiki/xacro">
	<xacro:property name="MODEL_PATH" value="/home/fiborobotlab/urdf/robots/obike/meshes/"/>
    <xacro:macro name="inertial_box" params="size rho:=1000 xyz:='0 0 0' rpy:='0 0 0'">
		<xacro:property name="w" value="${size.split()[0]}"/>
		<xacro:property name="d" value="${size.split()[1]}"/>
		<xacro:property name="h" value="${size.split()[2]}"/>
		<xacro:property name="mass" value="${rho*w*d*h}"/>
		<inertial>
			<origin xyz="${xyz}" rpy="${rpy}"/>
			<mass value="${mass}"/>
			<inertia ixx="${(mass/12)*(h**2 + d**2)}" iyy="${(mass/12)*(w**2 + h**2)}" izz="${(mass/12)*(w**2 + d**2)}" ixy="0" ixz="0" iyz="0"/>
		</inertial>
	</xacro:macro>
	<xacro:macro name="inertial_cylinder" params="length radius rho:=1000 xyz:='0 0 0' rpy:='0 0 0'">
		<xacro:property name="mass" value="${rho*pi*length*radius**2}"/>
		<inertial>
			<origin xyz="${xyz}" rpy="${rpy}"/>
			<mass value="${mass}"/>
			<inertia ixx="${(mass/12)*(3*radius**2 + length**2)}" iyy="${(mass/12)*(3*radius**2 + length**2)}" izz="${(mass/2)*radius**2}" ixy="0" ixz="0" iyz="0"/>
		</inertial>
	</xacro:macro>
	<xacro:macro name="inertial_sphere" params="radius rho:=1000 xyz:='0 0 0' rpy:='0 0 0'">
		<xacro:property name="mass" value="${4/3*rho*pi*radius**3}"/>
		<inertial>
			<origin xyz="${xyz}" rpy="${rpy}"/>
			<mass value="${mass}"/>
			<inertia ixx="${(2/5*mass)*(radius**2)}" iyy="${(2/5*mass)*(radius**2)}" izz="${(2/5*mass)*(radius**2)}" ixy="0" ixz="0" iyz="0"/>
		</inertial>
	</xacro:macro>
	<xacro:macro name="collision_cylinder" params="length radius xyz:='0 0 0' rpy:='0 0 0'">
		<collision>
			<origin xyz="${xyz}" rpy="${rpy}"/>
			<geometry>
				<cylinder length="${length}" radius="${radius}"/>
			</geometry>
		</collision>
	</xacro:macro>
	<xacro:macro name="collision_capsule" params="length radius xyz:='0 0 0' rpy:='0 0 0'">
		<collision>
			<origin xyz="${xyz}" rpy="${rpy}"/>
			<geometry>
				<capsule length="${length}" radius="${radius}"/>
			</geometry>
		</collision>
	</xacro:macro>
	<xacro:macro name="collision_box" params="size xyz:='0 0 0' rpy:='0 0 0'">
		<collision>
			<origin xyz="${xyz}" rpy="${rpy}"/>
			<geometry>
				<box size="${size}"/>
			</geometry>
		</collision>
	</xacro:macro>
	<xacro:macro name="collision_sphere" params="radius xyz:='0 0 0' rpy:='0 0 0'">
		<collision>
			<origin xyz="${xyz}" rpy="${rpy}"/>
			<geometry>
				<sphere radius="${radius}"/>
			</geometry>
		</collision>
	</xacro:macro>
	<xacro:macro name="inertial_manual" params="mass xyz:='0 0 0' rpy:='0 0 0' ixx iyy izz ixy:='0' ixz:='0' iyz:='0'">
		<inertial>
			<origin xyz="${xyz}" rpy="${rpy}"/>
			<mass value="${mass}"/>
			<inertia ixx="${ixx}" iyy="${iyy}" izz="${izz}" ixy="${ixy}" ixz="${ixz}" iyz="${iyz}"/>
		</inertial>
	</xacro:macro>

	<link name="chassic">
		<visual>
			<geometry>
				<mesh filename="${MODEL_PATH}chassic.dae" scale="1 1 1"/>
			</geometry>
		</visual>

	</link>

	<link name="motor_mount">
		<visual>
			<geometry>
				<mesh filename="${MODEL_PATH}motor_mount.dae" scale="1 1 1"/>
			</geometry>
		</visual>

	</link>

	<joint name="motor_mount_joint" type="fixed">
		<origin xyz="-0.005 0 0.08" rpy="0 0 0"/>
		<parent link="chassic"/>
		<child link="motor_mount"/>
	</joint>

	<link name="front_chassic">
		<visual>
			<geometry>
				<mesh filename="${MODEL_PATH}front_chassic.dae" scale="1 1 1"/>
			</geometry>
		</visual>

	</link>

	<joint name="front_chassic_joint" type="fixed">
		<origin xyz="0.055 0 0.035" rpy="0 0 0"/>
		<parent link="chassic"/>
		<child link="front_chassic"/>
	</joint>

	<link name="front_wheel_arm">
		<visual>
			<geometry>
				<mesh filename="${MODEL_PATH}front_wheel_arm.dae" scale="1 1 1"/>
			</geometry>
		</visual>

	</link>

	<joint name="front_wheel_arm_joint" type="continuous">
		<origin xyz="0.107304 0 0.03901" rpy="0 ${5*pi/6} 0"/>
		<axis xyz="0 0 1"/>
		<parent link="chassic"/>
		<child link="front_wheel_arm"/>
	</joint>

	<link name="front_wheel">
		<visual>
			<geometry>
				<mesh filename="${MODEL_PATH}front_wheel.dae" scale="1 1 1"/>
			</geometry>
		</visual>

	</link>

	<joint name="front_wheel_joint" type="continuous">
		<origin xyz="0 0 0.035" rpy="${-pi/2} 0 0"/>
		<axis xyz="0 0 1"/>
		<parent link="front_wheel_arm"/>
		<child link="front_wheel"/>
	</joint>

	<link name="faulhaber">
		<visual>
			<geometry>
				<mesh filename="${MODEL_PATH}faulhaber.dae" scale="1 1 1"/>
			</geometry>
		</visual>

	</link>

	<joint name="faulhaber_joint" type="fixed">
		<origin xyz="0 0 0" rpy="0 ${pi/2} 0"/>
		<parent link="motor_mount"/>
		<child link="faulhaber"/>
	</joint>


	<link name="reaction_wheel">
		<visual>
			<geometry>
				<mesh filename="${MODEL_PATH}reaction_wheel.dae" scale="1 1 1"/>
			</geometry>
		</visual>

	</link>

	<joint name="reaction_wheel_joint" type="continuous">
		<origin xyz="0.044 0 0" rpy="0 ${pi/2} 0"/>
		<axis xyz="0 0 1"/>
		<parent link="motor_mount"/>
		<child link="reaction_wheel"/>
	</joint>

	<link name="reaction_wheel_steel">
		<visual>
			<geometry>
				<mesh filename="${MODEL_PATH}reaction_wheel_steel.dae" scale="1 1 1"/>
			</geometry>
		</visual>

	</link>

	<joint name="reaction_wheel_steel_joint" type="fixed">
		<origin xyz="0 0 0.004" rpy="0 0 0"/>
		<parent link="reaction_wheel"/>
		<child link="reaction_wheel_steel"/>
	</joint>

	<link name="rear_wheel">
		<visual>
			<geometry>
				<mesh filename="${MODEL_PATH}rear_wheel.dae" scale="1 1 1"/>
			</geometry>
		</visual>

	</link>

	<joint name="rear_wheel_joint" type="continuous">
		<origin xyz="-0.05 0 0.022" rpy="${pi/2} 0 0"/>
		<axis xyz="0 0 1"/>
		<parent link="chassic"/>
		<child link="rear_wheel"/>
	</joint>


	
</robot>